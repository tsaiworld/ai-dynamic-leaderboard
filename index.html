<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Dynamic Leaderboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <header class="container">
    <h1>‚ö° AI Dynamic Leaderboard</h1>
    <p class="subtitle">Ranked by Popularity (40%), Performance (25%), Cost (10%), Privacy (10%), Innovation (15%)</p>
    <div id="lastUpdated" class="last-updated"></div>
  </header>

  <main class="container" id="leaderboard"></main>

  <footer class="container">
    <p>Built for Brian ‚Ä¢ JSON-powered ‚Ä¢ Auto-updatable via scripts</p>
  </footer>

  <script>
    async function loadDashboard() {
      const res = await fetch('data/ai_dashboard.json?_=' + Date.now());
      const data = await res.json();
      document.getElementById('lastUpdated').textContent = 'Last updated: ' + data.meta.last_updated;

      const weights = data.meta.weights;
      const root = document.getElementById('leaderboard');
      root.innerHTML = '';

      const medal = (i) => (i===1 ? 'ü•á' : i===2 ? 'ü•à' : i===3 ? 'ü•â' : i);

      const scoreOf = (s) => (
        s.popularity * weights.popularity +
        s.performance * weights.performance +
        s.cost * weights.cost +
        s.privacy * weights.privacy +
        s.innovation * weights.innovation
      );

      data.categories.forEach(cat => {
        // compute totals and sort
        const withTotals = cat.entries.map(e => ({
          ...e,
          total: Math.round(scoreOf(e.scores))
        })).sort((a,b) => b.total - a.total).slice(0, 3);

        // section
        const section = document.createElement('section');
        section.className = 'category';

        section.innerHTML = `
          <div class="category-header">
            <h2>${cat.name}</h2>
          </div>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Model / Tool</th>
                  <th>What's New</th>
                  <th>Best Used For</th>
                  <th>Main Pro / Con</th>
                  <th class="score">Score</th>
                </tr>
              </thead>
              <tbody>
                ${withTotals.map((e, i) => `
                  <tr>
                    <td class="rank">${medal(i+1)}</td>
                    <td class="tool">${e.tool}</td>
                    <td class="whats-new">${e.whats_new}</td>
                    <td class="best">${e.best_used_for}</td>
                    <td class="procon">
                      <div>‚úÖ ${e.pro}</div>
                      <div>‚ùå ${e.con}</div>
                    </td>
                    <td class="score"><span class="badge">${e.total}</span></td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
        `;

        root.appendChild(section);
      });
    }

    loadDashboard();
  </script>
</body>
</html>
